<!DOCTYPE html>
<html>
<head>
  <title></title>

  <style>
    .overlay {
      /*background-image: url(https://i.gifer.com/ZHum.gif);*/
      /*background-image: url(https://i.gifer.com/3QAe.gif);*/
      /*background-image: url(https://i.gifer.com/7S3j.gif);*/
      /*background-image: url(https://i.gifer.com/ZRSm.gif);*/
      /*background-image: url(https://i.gifer.com/CTM.gif);*/
      /*background-image: url(https://i.gifer.com/VJC.gif);*/
      /*background-image: url(https://i.gifer.com/H2HT.gif);*/
      /*background-image: url(https://i.gifer.com/slt.gif);*/
      /*background-image: url(https://i.gifer.com/S5Db.gif);*/
      /*background-image: url(https://i.gifer.com/ySG.gif);*/
      /*background-image: url(https://i.gifer.com/g0eI.gif);*/
      /*background-image: url(https://i.gifer.com/t7.gif);*/
      /*background-image: url(https://i.gifer.com/7S3H.gif);*/
      /*background-image: url(https://i.gifer.com/GeoX.gif);*/
      background-image: url(https://i.gifer.com/g0eI.gif);

      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 19;
      transition-duration: 2s;
      transition-delay: 0s, 1s;

    }

    .next {
      position: fixed;
      bottom: 0;
      width: 100vw;
      text-align: center;
      z-index: 20;
      /*display: flex;*/
    }

    .hidden {
      display: none;
      opacity: 0.3;
    }

    .keys {
      position: fixed;
      top: 0;
      right: 0;
      display: flex;
      width: 10%;
      height: 10%;
      z-index: 10;
    }

    .admin-school {
      display: flex;
      margin: 0 auto;
      width: 500px;
      height: 50px;
      background: black;
      align-items: center;
      justify-content: center;
    }

    .fire2 {
      color: #fff;
      text-shadow: 0 0 2px #eee,
      0 0 4px #fff,
      0 -2px 4px #ff3,
      2px -4px 6px #fd3,
      -2px -6px 11px #f80,
      2px -8px 18px #f20;
      font-size: 20px;
    }
  </style>
  <link rel="stylesheet/less" href="./style.less"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/3.9.0/less.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
<div id='app'>
  <div class="slides">

    <div v-if="numberSlides<15" class="next">
      <button class="nextSlide" @click="changeSlide">ДАЛІ</button>

    </div>
    <div v-if="numberSlides===1" class="slide-1">
      1
    </div>
    <!--    </div>-->

    <!--    <div class="slide">-->
    <div v-if="numberSlides===2" class="slide-2">
      2
      <!--        <div v-for="q in questions.s6">-->
      <!--          {{q.question}}-->
      <!--          <label>-->
      <!--            <input-->
      <!--                    type="checkbox"-->
      <!--                    v-for="a in q.allAnswers"-->
      <!--                    v-model="answers"-->
      <!--                    value="a.value"-->
      <!--                    @change="func"-->
      <!--            >{{a.title}}</label>-->
      <!--        </div>-->
    </div>
    <!--    </div>-->
    <div v-if="numberSlides===3" class="slide-3">
      3 Начальниця управління освіти, у якої в голові питання
    </div>
    <div v-if="numberSlides===4" class="slide-4">
      4
    </div>
    <div v-if="numberSlides===5" class="slide-5">
      5
      <button @click="changeSlide" class="exit">Вихід є</button>

    </div>
    <div v-if="numberSlides===6" class="slide-6">
      6 Підказка: склади пазл (обери пазли, які потрібно поміняти місцями)
      <div class="skrynya">
        <div @click="selectImage" id="skrynya1" class="skrynya1"></div>
        <div @click="selectImage" id="skrynya2" class="skrynya3"></div>
        <div @click="selectImage" id="skrynya3" class="skrynya2">3333</div>
        <div @click="selectImage" id="skrynya4" class="skrynya4">4444</div>
      </div>
    </div>
    <div v-if="numberSlides===7" class="slide-7">
      7 Підказка: візьми ключ, відімкни двері
      <div @click="selectDoor" class="door">
        <div class="door-left"></div>
        <div class="doorright"></div>
      </div>
    </div>
    <div v-if="numberSlides===8" class="slide-8">
      8
    </div>
    <div v-if="numberSlides===9" class="slide-9">
      9
    </div>
    <div v-if="numberSlides===10" class="slide-10">
      10
      скеля ЗАСНОВНИК
      <br>
      <div v-for="q,qIndex in questions.s10" :key="q.question">
        {{q.question}}
        <div v-for="ans,aIndex in q.allAnswers"
             :key="ans.title"
             :value="ans.value"
             :title="ans.title">
          <label>
            <input type="checkbox" @change="controlAnswer(qIndex,aIndex)" v-model="ans.value">{{ans.title}}
          </label>
        </div>
      </div>
    </div>
    <div v-if="numberSlides===11" class="slide-11">
      11
      <div class="admin-school">
        <!--        <img src="https://i.gifer.com/BRDH.gif" height="50px">-->
        <h1 class="fire2">АДМІНІСТРАЦІЯ ШКОЛИ</h1>
        <!--        <img src="https://i.gifer.com/BRDH.gif" height="50px">-->
      </div>
      <br>
      <!--      <p>-->
      <!--        <label>Чи допоможе фінансова автономія залучити кошти із різних джерел?</label>-->
      <!--        <br>-->
      <!--        <label>-->
      <!--          <input type="radio" name="status" value="yes" @сlick="if(this.checked) CheckRadio('slide3',1);">-->
      <!--          Так-->
      <!--        </label>-->
      <!--        <label>-->
      <!--          <input type="radio" name="status" value="No" @сlick="if(this.checked) CheckRadio('slide3',0);">-->
      <!--          Ні-->
      <!--        </label>-->
      <!--        <label>-->
      <!--          <input type="radio" name="status" value="nknow" @сlick="if(this.checked) CheckRadio('slide3',0);">-->
      <!--          Не знаю-->
      <!--        </label>-->
      <!--      </p>-->
      <!--      <p>-->
      <!--        <label>Чи допоможе фінансова автономія залучити кошти із різних джерел?</label>-->
      <!--        <br>-->
      <!--        <label>-->
      <!--          <input type="checkbox" class="status2" value="yes" @сlick="if(this.checked) CheckRadio('slide3',1);">-->
      <!--          сформувати стратегію розвитку школи на 3-5 років-->
      <!--        </label>-->
      <!--        <br>-->
      <!--        <label>-->
      <!--          <input type="checkbox" class="status2" value="yes" @сlick="if(this.checked) CheckRadio('slide3',1);">-->
      <!--          провести конкурс до піклувальних (наглядових) рад-->
      <!--        </label>-->
      <!--        <br>-->
      <!--        <label>-->
      <!--          <input type="checkbox" class="status2" value="yes" @сlick="if(this.checked) CheckRadio('slide3',1);">-->
      <!--          налагодити спілкування із громадою-->
      <!--        </label>-->
      <!--        <br>-->
      <!--        <label>-->
      <!--          <input type="checkbox" class="status2" value="yes" @сlick="if(this.checked) CheckRadio('slide3',1);">-->
      <!--          розказувати про діяльність школи-->
      <!--        </label>-->
      <!--      </p>-->
    </div>
    <div v-if="numberSlides===12" class="slide-12">
      12 труби ГРОШІ
      <div v-for="q,qIndex in questions.s12" :key="q.question">
        {{q.question}}
        <div v-for="ans,aIndex in q.allAnswers"
             :key="ans.title"
             :value="ans.value"
             :title="ans.title">
          <label>
            <input type="checkbox" @change="controlAnswer(qIndex,aIndex)" v-model="ans.value">{{ans.title}}
          </label>
        </div>
      </div>
    </div>
    <div v-if="numberSlides===13" class="slide-13">
      13
    </div>

    <div class="overlay hidden">
    </div>


  </div>
  <div v-if="numberSlides>6" class="keys" id="key" @click="giveKey">
    <keys :foundkeys="howFoundKeys"></keys>
  </div>
</div>

<script src="js/keys.js"></script>
<script>
  let found = 0;
  const tempSlide = document.querySelector('.nextSlide');
  let result = 0;
  let boolrez = false;
  let rightAnswers = 5;

  function CheckRadio(adress, value) {
    let st2 = document.querySelectorAll('.status2');
    for (let i = 0; i < st2.length; i++) {
      st2[i].addEventListener('change', function () {
        if (this.checked) {
          console.log('checked')
        } else console.log('unchecked')
      });
    }
    boolrez = (value === 1);
    result += value;
    rezultat(adress);
  }

  function rez() {
    return result === rightAnswers;
  }

  function rezultat(adress) {
    if (rez() === true) {
      console.log("ok");
      console.log(result);
      console.log(boolrez);
      changeSlide(adress)
    } else {
      console.log("no");
      console.log(result);
      console.log(boolrez)
    }
  }

  const questions = {

    s10: [
      {
        question: "1. Хто такий засновник школи?",
        correctAnswers: [0, 0, true, 0],
        allAnswers: [
          {
            title: 'директор школи',
            value: 0
          },
          {
            title: 'батьківський комітет',
            value: 0
          },
          {
            title: 'місцева рада депутатів',
            value: 0
          },
          {
            title: 'управління / відділ освіти',
            value: 0
          }
        ]
      },
      {
        question: "Які документи має ухвалити засновник?",
        correctAnswers: [true, true, 0, 0],
        allAnswers: [
          {
            title: 'рішення про переведення шкіл на фінансову автономію',
            value: 0
          },
          {
            title: 'положення про утворення, організацію діяльності та ліквідацію Піклувальних ' +
              '(Наглядових) рад середніх навчальних закладів комунальної форми власності',
            value: 0
          },
          {
            title: 'рішення про ведення окремої бухгалтерії у школах',
            value: 0
          },
          {
            title: 'рішення про створення комунального підприємства «Піклувальна (Наглядова) рада»',
            value: 0
          }
        ]
      },
    ],
    s12: [
      {
        question: "1. Де взяти гроші?",
        correctAnswers: [true, true, true, true, true,true,true,true,true],
        allAnswers: [
          {
            title: 'державний бюджет',
            value: 0
          },
          {
            title: 'місцевий бюджет',
            value: 0
          },
          {
            title: 'гранти вітчизняних і міжнародних організацій',
            value: 0
          },
          {
            title: 'плата за надання навчальних та інших послуг',
            value: 0
          },
          {
            title: 'плата за науково-дослідні роботи',
            value: 0
          },
          {
            title: 'доходи від реалізації продукції',
            value: 0
          },
          {
            title: 'дивіденди від цінних паперів',
            value: 0
          },
          {
            title: 'добровільні внески',
            value: 0
          },
          {
            title: 'інші джерела, не заборонені законодавством',
            value: 0
          }
        ]
      },
      {
        question: "Які документи має ухвалити засновник?",
        correctAnswers: [true, true, 0, 0],
        allAnswers: [
          {
            title: 'рішення про переведення шкіл на фінансову автономію',
            value: 0
          },
          {
            title: 'положення про утворення, організацію діяльності та ліквідацію Піклувальних ' +
              '(Наглядових) рад середніх навчальних закладів комунальної форми власності',
            value: 0
          },
          {
            title: 'рішення про ведення окремої бухгалтерії у школах',
            value: 0
          },
          {
            title: 'рішення про створення комунального підприємства «Піклувальна (Наглядова) рада»',
            value: 0
          }
        ]
      },
    ]
  }

  var t = new Vue({
    el: '#app',
    data() {
      return {
        controlSlide: true,
        currentKey: 0,
        useKey: 0,
        numberSelect: 0,
        arrayImages: [],
        numberSlide: 1,
        foundkeys: 0,
        answers: [],
        questions,
      }
    },
    computed: {
      howFoundKeys() {
        if (this.foundkeys > 0) alert("Ви знайшли ключ. Можна йти далі");
        return this.foundkeys;
      },
      numberSlides() {
        // console.log("numberS " + this.numberSlide);
        return this.numberSlide;
      }
    },
    methods: {
      changeSlide() {
        if ((this.controlSlide && this.numberSlide !== 6) || (this.numberSlide === 6 && this.foundkeys === 1)) {
          const tempSlide = document.querySelector(".slide-" + this.numberSlide);
          console.log("change slide");
          tempSlide.classList.add('hidden');
          const overlay = document.querySelector(".overlay");
          overlay.classList.remove('hidden');
          overlay.animate({opacity: "0.1"}, 2000);
          setTimeout(() => overlay.classList.add('hidden'), 2000);
          this.numberSlide++;
        } else {
          if (this.numberSlide > 9) {
            alert("Ви вказали не всі правильні відповіді");
          }
          if (this.numberSlide === 6) {
            alert("Складіть правильно пазл")
          }
        }
      },
      // func() {
      //   console.log("func");
      //   this.foundkeys++;
      // },
      selectImage(e) {
        this.numberSelect++;
        this.arrayImages.push(e.target.id);

        if (this.numberSelect === 2) {
          this.changeImages();
          this.numberSelect = 0;
        } else {
          // alert("вкажіть - з яким елементом поміняти місцями");
        }
      },
      changeImages() {
        let el1 = document.getElementById(this.arrayImages[0]);
        let el2 = document.getElementById(this.arrayImages[1]);
        let temp = el1.className;
        el1.classList.replace(el1.className, el2.className);
        el2.classList.replace(el2.className, temp);
        this.arrayImages = [];
        this.controlSkryni();
      },
      controlSkryni() {
        console.log("control");
        // let control = true;
        this.controlSlide = true;
        for (let i = 1; i < 4; i++) {
          let id = "skrynya" + i;
          let el = document.getElementById(id);
          if (el.className !== id) {
            this.controlSlide = false;
          }
        }
        if (this.controlSlide) {
          this.foundkeys = 1;
          this.changeSlide();
        }
      },
      giveKey() {
        this.useKey++;
      },
      selectDoor() {
        console.log("select door");
        if (this.useKey > 0) {
          this.openDoor();
          this.changeSlide();
          this.foundkeys = 0;
        }
      },
      openDoor() {
        let temp1 = document.getElementsByClassName('doorright');
      },
      controlAnswer(index1, index2) {
        this.controlSlide = true;
        for (let k=0; k<questions.s10.length; k++) {
        for (let i = 0; i < questions.s10[k].correctAnswers.length; i++) {
          if (questions.s10[k].correctAnswers[i] != questions.s10[k].allAnswers[i].value) {
            this.controlSlide = false;
          }
        }
      }
         if (this.controlSlide) {this.foundkeys++}
      }
    }
  })

</script>
</body>
</html>

